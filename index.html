<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>Hello World</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hello World">
<meta property="og:url" content="http://gwang-cv.github.io/index.html">
<meta property="og:site_name" content="Hello World">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hello World">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="https://sites.google.com/site/2013gwang/logss.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Gang Wang</a></h1>
		</hgroup>

		
		<p class="header-subtitle">a computer vision researcher</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Menu</li>
						<li>Tags</li>
						
						
						<li>Über</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">Home</a></li>
				        
							<li><a href="/archives">Archives</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/gwang-cv" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/messiwang" title="weibo">weibo</a>
					        
								<a class="google" target="_blank" href="https://sites.google.com/site/2013gwang/" title="google">google</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Debug/" style="font-size: 17.5px;">Debug</a> <a href="/tags/DeepLearning/" style="font-size: 20px;">DeepLearning</a> <a href="/tags/ML/" style="font-size: 10px;">ML</a> <a href="/tags/Mac/" style="font-size: 15px;">Mac</a> <a href="/tags/Math/" style="font-size: 10px;">Math</a> <a href="/tags/Matlab/" style="font-size: 10px;">Matlab</a> <a href="/tags/Python/" style="font-size: 12.5px;">Python</a> <a href="/tags/Researcher/" style="font-size: 10px;">Researcher</a> <a href="/tags/python/" style="font-size: 10px;">python</a>
					</div>
				</section>
				
				
				

				
				
				<section class="switch-part switch-part3">
				
					<div id="js-aboutme">Hello, I&#39;m Gang Wang. This is my blog, enjoy it.</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Gang Wang</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="https://sites.google.com/site/2013gwang/logss.jpg" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">Gang Wang</h1>
			</hgroup>
			
			<p class="header-subtitle">a computer vision researcher</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">Home</a></li>
		        
					<li><a href="/archives">Archives</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/gwang-cv" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/messiwang" title="weibo">weibo</a>
			        
						<a class="google" target="_blank" href="https://sites.google.com/site/2013gwang/" title="google">google</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
  
    <article id="post-Theano+OpenCV+LIFT" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/06/28/Theano+OpenCV+LIFT/" class="article-date">
  	<time datetime="2018-06-28T09:56:15.223Z" itemprop="datePublished">2018-06-28</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/28/Theano+OpenCV+LIFT/">Theano+OpenCV+LIFT</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li><p>说明<br> LIFT: Learned Invariant Feature Points<br> 作者开源代码：<a href="https://github.com/cvlab-epfl/LIFT" target="_blank" rel="external">https://github.com/cvlab-epfl/LIFT</a></p>
<p> PS: 注意下载作者release的<a href="https://github.com/cvlab-epfl/LIFT/releases/tag/v0.0.10" target="_blank" rel="external">1.0版</a>，修复了一些bug:<code>.locks directory is now included in the repository by default</code>。</p>
</li>
<li><p>安装最新OpenCV 3.x</p>
<p> 略</p>
</li>
<li><p>安装Theano并配置</p>
 <figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install theano==<span class="number">0.9</span><span class="number">.0</span></div></pre></td></tr></table></figure>
<p> 配置：(开源代码中三个主要部分需要GPU的支持)</p>
 <figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">sudo</span> vim ~/.theanorc</div></pre></td></tr></table></figure>
 <figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="section">[global]</span>  </div><div class="line"><span class="attr">device</span> = gpu0  </div><div class="line"><span class="attr">floatX</span> = float32 </div><div class="line"><span class="section"> </span></div><div class="line">[nvcc]  </div><div class="line"><span class="attr">fastmath</span> = <span class="literal">True</span>  </div><div class="line"><span class="section"></span></div><div class="line">[cuda]    </div><div class="line"><span class="attr">root</span>=/usr/local/cuda-<span class="number">8.0</span></div></pre></td></tr></table></figure>
</li>
<li><p>安装其他依赖项</p>
<p> 安装flufl.lock:<br> 1) 下载安装包<br> <a href="https://pypi.python.org/pypi/flufl.lock/2.4.1" target="_blank" rel="external">https://pypi.python.org/pypi/flufl.lock/2.4.1</a></p>
 <figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">tar -zxf flufl<span class="selector-class">.lock-2</span>.<span class="number">4.1</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></div><div class="line">sudo python setup<span class="selector-class">.py</span> install</div></pre></td></tr></table></figure>
<p> 2) 或</p>
 <figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install flufl.lock==<span class="number">2.4</span><span class="number">.1</span></div></pre></td></tr></table></figure>
</li>
</ol>
<pre><code>安装Lasagne:
下载安装包：[https://github.com/Lasagne/Lasagne](https://github.com/Lasagne/Lasagne)【(0.2.dev1)】

<span class="comment"><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">tar -zxf Lasagne<span class="selector-class">.tar</span><span class="selector-class">.gz</span></div><div class="line">sudo python setup<span class="selector-class">.py</span> install</div></pre></td></tr></table></figure></span>


其他项：

<span class="comment"><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip <span class="keyword">install</span> numpy <span class="keyword">parse</span> h5py scipy</div></pre></td></tr></table></figure></span>
</code></pre><ol>
<li><p>测试demo</p>
 <figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"># Build the shared library <span class="keyword">by</span></div><div class="line"><span class="keyword">cd</span> c-code/build</div><div class="line">cmake -<span class="keyword">D</span> CUDA_TOOLKIT_ROOT_DIR=/usr/<span class="keyword">local</span>/cuda-8.0 ..</div><div class="line">make</div><div class="line"></div><div class="line">#To <span class="keyword">run</span> the <span class="keyword">test</span> <span class="keyword">program</span> simply</div><div class="line">./<span class="keyword">run</span>.<span class="keyword">sh</span></div></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>其他问题</p>
<p> cmake报错：</p>
 <figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">  Could NOT find CUDA: Found unsuitable <span class="built_in">version</span> <span class="string">"9.1"</span>, <span class="keyword">but</span> required <span class="keyword">is</span> exact</div><div class="line"><span class="built_in">version</span> <span class="string">"8.0"</span> (found /usr/<span class="keyword">local</span>/cuda<span class="number">-9.1</span>)</div><div class="line">  <span class="comment">#需指定cuda版本</span></div><div class="line">  cmake -D CUDA_TOOLKIT_ROOT_DIR=/usr/<span class="keyword">local</span>/cuda<span class="number">-8.0</span> ..</div></pre></td></tr></table></figure>
<p>已解决的一些issues： <a href="https://github.com/cvlab-epfl/LIFT/issues?q=is%3Aissue+is%3Aclosed" target="_blank" rel="external">https://github.com/cvlab-epfl/LIFT/issues?q=is%3Aissue+is%3Aclosed</a></p>
</li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Debug/">Debug</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Research/">Research</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-MacOs High Sierra using aria2" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/05/20/MacOs High Sierra using aria2/" class="article-date">
  	<time datetime="2018-05-20T07:27:30.453Z" itemprop="datePublished">2018-05-20</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/20/MacOs High Sierra using aria2/">MacOs High Sierra using aria2</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li><p>说明</p>
<p> 配置 aria2，结合 Chrome，代替baidu网盘App下载文件。</p>
</li>
<li><p>安装aria2</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">brew install aria2</div><div class="line"></div><div class="line">==&gt; Downloading https://homebrew.bintray.com/bottles/aria2-1.34.0.high_sierra.bottle.tar.gz</div><div class="line"><span class="comment">######################################################################## 100.0%</span></div><div class="line">==&gt; Pouring aria2-1.34.0.high_sierra.bottle.tar.gz</div><div class="line">==&gt; Caveats</div><div class="line">Bash completion has been installed to:</div><div class="line">  /usr/<span class="built_in">local</span>/etc/bash_completion.d</div><div class="line">==&gt; Summary</div><div class="line">🍺  /usr/<span class="built_in">local</span>/Cellar/aria2/1.34.0: 22 files, 4.0MB</div></pre></td></tr></table></figure>
</li>
<li><p>配置aria2</p>
<p> RPC模式配置：</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> ~</div><div class="line">mkdir .aria2</div><div class="line"><span class="built_in">cd</span> .aria2</div><div class="line">touch aria2.conf</div><div class="line">vim aria2.conf</div><div class="line"></div><div class="line"><span class="comment">#用户名</span></div><div class="line"><span class="comment">#rpc-user=user</span></div><div class="line"><span class="comment">#密码</span></div><div class="line"><span class="comment">#rpc-passwd=passwd</span></div><div class="line"><span class="comment">#上面的认证方式不建议使用,建议使用下面的token方式</span></div><div class="line"><span class="comment">#设置加密的密钥</span></div><div class="line"><span class="comment">#rpc-secret=token</span></div><div class="line"><span class="comment">#允许rpc</span></div><div class="line"><span class="built_in">enable</span>-rpc=<span class="literal">true</span></div><div class="line"><span class="comment">#允许所有来源, web界面跨域权限需要</span></div><div class="line">rpc-allow-origin-all=<span class="literal">true</span></div><div class="line"><span class="comment">#允许外部访问，false的话只监听本地端口</span></div><div class="line">rpc-listen-all=<span class="literal">true</span></div><div class="line"><span class="comment">#RPC端口, 仅当默认端口被占用时修改</span></div><div class="line"><span class="comment">#rpc-listen-port=6800</span></div><div class="line"><span class="comment">#最大同时下载数(任务数), 路由建议值: 3</span></div><div class="line">max-concurrent-downloads=5</div><div class="line"><span class="comment">#断点续传</span></div><div class="line"><span class="built_in">continue</span>=<span class="literal">true</span></div><div class="line"><span class="comment">#同服务器连接数</span></div><div class="line">max-connection-per-server=5</div><div class="line"><span class="comment">#最小文件分片大小, 下载线程数上限取决于能分出多少片, 对于小文件重要</span></div><div class="line">min-split-size=10M</div><div class="line"><span class="comment">#单文件最大线程数, 路由建议值: 5</span></div><div class="line">split=10</div><div class="line"><span class="comment">#下载速度限制</span></div><div class="line">max-overall-download-limit=0</div><div class="line"><span class="comment">#单文件速度限制</span></div><div class="line">max-download-limit=0</div><div class="line"><span class="comment">#上传速度限制</span></div><div class="line">max-overall-upload-limit=0</div><div class="line"><span class="comment">#单文件速度限制</span></div><div class="line">max-upload-limit=0</div><div class="line"><span class="comment">#断开速度过慢的连接</span></div><div class="line"><span class="comment">#lowest-speed-limit=0</span></div><div class="line"><span class="comment">#验证用，需要1.16.1之后的release版本</span></div><div class="line"><span class="comment">#referer=*</span></div><div class="line"><span class="comment">#文件保存路径, 默认为当前启动位置</span></div><div class="line">dir=/Users/xxx/Downloads</div><div class="line"><span class="comment">#文件缓存, 使用内置的文件缓存, 如果你不相信Linux内核文件缓存和磁盘内置缓存时使用, 需要1.16及以上版本</span></div><div class="line"><span class="comment">#disk-cache=0</span></div><div class="line"><span class="comment">#另一种Linux文件缓存方式, 使用前确保您使用的内核支持此选项, 需要1.15及以上版本(?)</span></div><div class="line"><span class="comment">#enable-mmap=true</span></div><div class="line"><span class="comment">#文件预分配, 能有效降低文件碎片, 提高磁盘性能. 缺点是预分配时间较长</span></div><div class="line"><span class="comment">#所需时间 none &lt; falloc ? trunc « prealloc, falloc和trunc需要文件系统和内核支持</span></div><div class="line">file-allocation=prealloc</div></pre></td></tr></table></figure>
<p> 默认下载路径的「/Users/xxx/Downloads」可以改。xxx为Mac用户名，输入<code>:w</code>保存。</p>
</li>
<li><p>启动RPC模式</p>
<p> 在终端输入<code>aria2c --conf-path=&quot;/Users/xx/.aria2/aria2.conf&quot; -D</code>，aria2 启动。</p>
</li>
<li><p>配置chrome</p>
<p> 下载 Chrome 插件<a href="https://github.com/acgotaku/BaiduExporter" target="_blank" rel="external">BaiduExporter.crx</a></p>
<p> 将其拖拽至Chrome扩展程序处安装，在百度网盘页面会新增一个功能按钮来使用aria下载。</p>
</li>
<li><p>配置GUI</p>
<p> 下载<a href="https://github.com/yangshun1029/aria2gui" target="_blank" rel="external">aria2gui</a>，解压后将其拷贝到应用程序中，打开会看到当前下载的文件列表。</p>
</li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Debug/">Debug</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Research/">Research</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-MacOSHighSierra安装labelImg" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/05/20/MacOSHighSierra安装labelImg/" class="article-date">
  	<time datetime="2018-05-20T03:33:39.537Z" itemprop="datePublished">2018-05-20</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/20/MacOSHighSierra安装labelImg/">MacOs High Sierra安装labelImg</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>labelImg官方地址:<a href="https://github.com/tzutalin/labelImg/blob/master/README.rst" target="_blank" rel="external">https://github.com/tzutalin/labelImg/blob/master/README.rst</a></p>
<p>macOS<br>Python 2 + Qt4</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">brew install qt qt4</div><div class="line">brew install libxml2</div><div class="line">make qt4py2</div><div class="line">python labelImg.py</div><div class="line">python  labelImg.py [IMAGE_PATH] [PRE-DEFINED CLASS FILE]</div></pre></td></tr></table></figure>
<p>Python 3 + Qt5 (Works on macOS High Sierra)</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">brew install qt  <span class="comment"># will install qt-5.x.x</span></div><div class="line">brew install libxml2</div><div class="line">make qt5py3</div><div class="line">python labelImg.py</div><div class="line">python  labelImg.py [IMAGE_PATH] [PRE-DEFINED CLASS FILE]</div></pre></td></tr></table></figure>
<p>实际在使用python2的时候，无法用<code>brew install qt qt4</code>，且在python3下安装libxml2后报错：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ImportError: No module named lxml</div></pre></td></tr></table></figure>
<p>所以在macos high sierra下安装python3，然后</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">brew install qt</div><div class="line">pip3 install lxml</div><div class="line">make qt5py3</div><div class="line">python3 labelImg.py</div></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Debug/">Debug</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Research/">Research</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-py-Faster-rcnn for MacOS" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/01/03/py-Faster-rcnn for MacOS/" class="article-date">
  	<time datetime="2018-01-03T09:13:36.000Z" itemprop="datePublished">2018-01-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/01/03/py-Faster-rcnn for MacOS/">py-Faster-rcnn for CPU_only MacOS</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>1. 准备</strong></p>
<p>需要安装OpenCV3.x版本，以及OpenBLAS，参考：<a href="http://gwang-cv.github.io/2016/01/26/Mac%E5%AE%89%E8%A3%85OpenCV/">Mac安装OpenCV</a>, <a href="http://gwang-cv.github.io/2016/04/07/MacOS%E5%AE%89%E8%A3%85caffe/">MacOS安装caffe</a></p>
<p>确认安装brew Cython easydict protobuf</p>
<p>下载py-faster-rcnn源码：</p>
<pre><code>git clone –recursive http<span class="variable">s:</span>//github.<span class="keyword">com</span>/rbgirshick/<span class="keyword">py</span>-faster-rcnn.git
</code></pre><p><strong>2. 编译caffe</strong></p>
<p>修改<code>makefile.config</code></p>
<pre><code># <span class="string">USE_CUDNN :</span>= <span class="number">1</span>
<span class="string">CPU_ONLY :</span>= <span class="number">1</span>
<span class="string">USE_OPENCV :</span>= <span class="number">1</span>
<span class="string">OPENCV_VERSION :</span>= <span class="number">3</span>
<span class="string">CUDA_DIR :</span>= <span class="regexp">/usr/</span>local/cuda
<span class="string">BLAS :</span>= open
<span class="string">BLAS_INCLUDE :</span>= <span class="regexp">/usr/</span>local<span class="regexp">/Cellar/</span>openblas<span class="regexp">/0.2.20/</span>include
<span class="string">BLAS_LIB :</span>= <span class="regexp">/usr/</span>local<span class="regexp">/Cellar/</span>openblas<span class="regexp">/0.2.20/</span>lib
<span class="string">PYTHON_INCLUDE :</span>= <span class="regexp">/usr/</span>include/python2.7 \
        <span class="regexp">/usr/</span>local<span class="regexp">/lib/</span>python2.7<span class="regexp">/site-packages/</span>numpy<span class="regexp">/core/</span>include    <span class="string">PYTHON_LIB :</span>= <span class="regexp">/usr/</span>lib
<span class="string">WITH_PYTHON_LAYER :</span>= <span class="number">1</span>
<span class="string">INCLUDE_DIRS :</span>= $(PYTHON_INCLUDE) <span class="regexp">/usr/</span>local<span class="regexp">/include  /</span>usr<span class="regexp">/local/</span>Cellar<span class="regexp">/hdf5 /</span>usr<span class="regexp">/local/</span>Cellar<span class="regexp">/opencv/</span><span class="number">3.2</span>.0/include
<span class="string">LIBRARY_DIRS :</span>= $(PYTHON_LIB) <span class="regexp">/usr/</span>local<span class="regexp">/lib /</span>usr<span class="regexp">/lib  /</span>usr<span class="regexp">/local/</span>Cellar<span class="regexp">/opencv/</span><span class="number">3.2</span>.0/lib        
<span class="string">BUILD_DIR :</span>= build
<span class="string">DISTRIBUTE_DIR :</span>= distribute
<span class="string">TEST_GPUID :</span>= <span class="number">0</span>
</code></pre><p>执行编译：</p>
<pre><code><span class="built_in">make</span> -j32 &amp;&amp; <span class="built_in">make</span> pycaffe
</code></pre><p><strong>3. 编译faster-rcnn</strong></p>
<p>修改文件，替换或删除关于gpu的代码行：</p>
<p>修改<code>./lib/setup.py</code></p>
<pre><code>...
<span class="preprocessor">#CUDA = locate_cuda()</span>
...
...
<span class="preprocessor">#self.set_executable('compiler_so', CUDA['nvcc'])</span>
...
...
<span class="preprocessor">#Extension('nms.gpu_nms',</span>
<span class="preprocessor">#[‘nms/nms_kernel.cu', 'nms/gpu_nms.pyx'],</span>
<span class="preprocessor">#library_dirs=[CUDA['lib64']],</span>
<span class="preprocessor">#libraries=['cudart'],</span>
<span class="preprocessor">#language='c++',</span>
<span class="preprocessor">#runtime_library_dirs=[CUDA['lib64']],</span>
<span class="preprocessor">## this syntax is specific to this build system</span>
<span class="preprocessor">## we're only going to use certain compiler args with nvcc and not with</span>
<span class="preprocessor">## gcc the implementation of this trick is in customize_compiler() below</span>
<span class="preprocessor">#extra_compile_args={'gcc': ["-Wno-unused-function"],</span>
<span class="preprocessor">#’nvcc': ['-arch=sm_35',</span>
<span class="preprocessor">#’—ptxas-options=-v',</span>
<span class="preprocessor">#’-c’,</span>
<span class="preprocessor">#’—compiler-options',</span>
<span class="preprocessor">#”’-fPIC'"]},</span>
<span class="preprocessor">#include_dirs = [numpy_include, CUDA['include']]</span>
<span class="preprocessor">#)</span>
</code></pre><p>执行编译：</p>
<pre><code><span class="keyword">cd</span> ./lib
<span class="keyword">make</span>
</code></pre><p><strong>4. 运行demo</strong></p>
<p>运行demo前需要修改几个文件，替换或删除关于gpu的代码行：</p>
<p>(1) 修改<code>~/py-faster-rcnn/lib/fast_rcnn/config.py</code></p>
<pre><code># Use GPU <span class="keyword">implementation</span> <span class="keyword">of</span> non-maximum suppression
# __C.USE_GPU_NMS = <span class="keyword">True</span>
__C.USE_GPU_NMS = <span class="keyword">False</span>
</code></pre><p>(2) 修改<code>~/py-faster-rcnn/tools/test_net.py和 ~/py-faster-rcnn/tools/train_net.py</code></p>
<pre><code><span class="hexcolor">#caf</span>fe.<span class="function"><span class="title">set_mode_gpu</span><span class="params">()</span></span>
caffe.<span class="function"><span class="title">set_mode_cpu</span><span class="params">()</span></span>
</code></pre><p>(3) 将<code>~/py-faster-rcnn/lib/setup.py</code>中，含有<code>nms.gpu_nms</code>的部分去掉</p>
<p>(4) 修改<code>./lib/fast-rcnn/nms_wrapper.py</code>，修改如下：</p>
<pre><code><span class="keyword">from</span> fast_rcnn.config <span class="keyword">import</span> cfg
<span class="comment">#from nms.gpu_nms import gpu_nms</span>
<span class="keyword">from</span> nms.cpu_nms <span class="keyword">import</span> cpu_nms

<span class="function"><span class="keyword">def</span> <span class="title">nms</span><span class="params">(dets, thresh, force_cpu=False)</span>:</span>
    <span class="string">"""Dispatch to either CPU or GPU NMS implementations."""</span>

    <span class="keyword">if</span> dets.shape[<span class="number">0</span>] == <span class="number">0</span>:
        <span class="keyword">return</span> []
    <span class="keyword">if</span> cfg.USE_GPU_NMS <span class="keyword">and</span> <span class="keyword">not</span> force_cpu:
        <span class="keyword">print</span> <span class="string">"nms_wrapper GPU ..."</span>
        <span class="comment">#return gpu_nms(dets, thresh, device_id=cfg.GPU_ID)</span>
    <span class="keyword">else</span>:
        <span class="keyword">return</span> cpu_nms(dets, thresh)
</code></pre><p>接下来运行demo即可。</p>
<p><strong>5. 问题</strong></p>
<p>(1) import caffe错误，或者报错fatal error: numpy/arrayobject.h没有那个文件或目录</p>
<p>修改Makefile.config找到PYTHON_INCLUDE：</p>
<pre><code>PYTHON_INCLUDE := <span class="regexp">/usr/i</span>nclude<span class="regexp">/python2.7 \
        /u</span>sr<span class="regexp">/lib/</span>python2.<span class="number">7</span><span class="regexp">/dist-packages/</span>numpy<span class="regexp">/core/i</span>nclude
</code></pre><p>要加一个local，变成： </p>
<pre><code><span class="string">PYTHON_INCLUDE :</span>= <span class="regexp">/usr/</span>include/python2.7 \
        <span class="regexp">/usr/</span>local<span class="regexp">/lib/</span>python2.7<span class="regexp">/dist-packages/</span>numpy<span class="regexp">/core/</span>include
</code></pre><p>(2) 报错<code>AttributeError: &#39;DataFrame&#39; object has no attribute &#39;sort_values&#39;</code></p>
<pre><code><span class="comment"># sort_values is new in version 0.17.0, so check your version of pandas. In the previous versions you should use sort</span>

pip install -<span class="constant">U</span> pandas

<span class="comment"># 查看pandas版本</span>
<span class="prompt">&gt;&gt;</span>&gt; import pandas as pd
<span class="prompt">&gt;&gt;</span>&gt; pd.show_versions()
<span class="prompt">&gt;&gt;</span>&gt; pd.__version_<span class="number">_</span>
</code></pre><p>(3) 找不到目录，在<code>_init_paths.py</code>中定义的路径修改：</p>
<pre><code><span class="built_in">#</span> 将 this_dir = osp.dirname<span class="params">(__file__)</span> 改为：
this_dir = osp.dirname<span class="params">(osp.abspath<span class="params">(__file__)</span>)</span>
</code></pre><hr>
<p>参考：</p>
<p><a href="https://www.cnblogs.com/justinzhang/p/5386837.html" target="_blank" rel="external">Faster R-CNN CPU环境搭建</a></p>
<p><a href="http://blog.csdn.net/handsome_sheng/article/details/76571658" target="_blank" rel="external">Mac下跑仅CPU模式下的py-faster-rcnn</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DeepLearning/">DeepLearning</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/DeepLearning/">DeepLearning</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-faster-rcnn errors" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/12/04/faster-rcnn errors/" class="article-date">
  	<time datetime="2017-12-04T02:32:17.000Z" itemprop="datePublished">2017-12-04</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/04/faster-rcnn errors/">训练faster-rcnn报错</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>训练结束后测试时出现类似</p>
<pre><code>File <span class="string">"/home/xxx/py-faster-rcnn/tools/../lib/datasets/voc_eval.py"</span>, line <span class="number">126</span>, <span class="keyword">in</span> voc_<span class="built_in">eval</span>
    R = [obj <span class="keyword">for</span> obj <span class="keyword">in</span> recs[imagename] <span class="keyword">if</span> obj[<span class="string">'name'</span>] == classname]
KeyError: <span class="string">'000002'</span>
</code></pre><p>解决方法: 删除data/VOCdekit2007下的annotations_cache文件夹</p>
<hr>
<p>基于ResNet101训练py-faster-rcnn遇到错误：</p>
<pre><code><span class="regexp">/faster-rcnn-py/</span>tools<span class="regexp">/../</span>lib<span class="regexp">/fast_rcnn/</span>bbox_transform.<span class="string">py:</span><span class="number">50</span>: <span class="string">RuntimeWarning:</span> overflow encountered <span class="keyword">in</span> exp
pred_h = np.exp(dh) * heights[:, np.newaxis]
faster-rcnn-py<span class="regexp">/tools/</span>..<span class="regexp">/lib/</span>rpn/proposal_layer.<span class="string">py:</span><span class="number">176</span>: <span class="string">RuntimeWarning:</span> invalid value encountered <span class="keyword">in</span> greater_equal
keep = np.where((ws &gt;= min_size) &amp; (hs &gt;= min_size))[<span class="number">0</span>]
</code></pre><p>类似解决方法：减小lr from 0.001 to 0.0001</p>
<pre><code>A possible solution could be <span class="built_in">to</span> decrease <span class="operator">the</span> base learning rate <span class="operator">in</span> <span class="operator">the</span> solver.prototxt
As <span class="keyword">it</span> is recommended here <span class="keyword">http</span>://caffe.berkeleyvision.org/tutorial/solver.html
Just change <span class="operator">the</span> base_lr: <span class="number">0.001</span> <span class="built_in">to</span> <span class="number">0.0001</span>

Note also that <span class="operator">the</span> above settings are merely guidelines, <span class="operator">and</span> they’re definitely <span class="operator">not</span> guaranteed <span class="built_in">to</span> be optimal (<span class="operator">or</span> even work <span class="keyword">at</span> all!) <span class="operator">in</span> every situation. If learning diverges (e.g., you <span class="built_in">start</span> <span class="built_in">to</span> see very large <span class="operator">or</span> NaN <span class="operator">or</span> inf loss values <span class="operator">or</span> outputs), <span class="keyword">try</span> dropping <span class="operator">the</span> base_lr (e.g., base_lr: <span class="number">0.001</span>) <span class="operator">and</span> re-training, repeating this <span class="keyword">until</span> you find <span class="operator">a</span> base_lr <span class="built_in">value</span> that works.
I did <span class="keyword">try</span> <span class="built_in">to</span> change <span class="operator">the</span> base_lr <span class="built_in">value</span> <span class="operator">and</span> now <span class="operator">the</span> NAN <span class="built_in">value</span> disappeared.
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Debug/">Debug</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Debug/">Debug</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Faster-rcnn detect small or tiny objects" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/12/01/Faster-rcnn detect small or tiny objects/" class="article-date">
  	<time datetime="2017-12-01T11:26:03.000Z" itemprop="datePublished">2017-12-01</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/01/Faster-rcnn detect small or tiny objects/">Faster-rcnn detect small or tiny objects</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="https://github.com/rbgirshick/py-faster-rcnn/issues/161" target="_blank" rel="external">https://github.com/rbgirshick/py-faster-rcnn/issues/161</a></p>
<p>R-CNN for Small Object Detection:  <a href="https://www.merl.com/publications/docs/TR2016-144.pdf" target="_blank" rel="external">https://www.merl.com/publications/docs/TR2016-144.pdf</a></p>
<p>Perceptual Generative Adversarial Networks for Small Object Detection   <a href="https://arxiv.org/pdf/1706.05274v1.pdf" target="_blank" rel="external">https://arxiv.org/pdf/1706.05274v1.pdf</a></p>
<p><a href="https://github.com/rbgirshick/py-faster-rcnn/issues/86" target="_blank" rel="external">https://github.com/rbgirshick/py-faster-rcnn/issues/86</a></p>
<p><a href="https://github.com/rbgirshick/py-faster-rcnn/issues/433" target="_blank" rel="external">https://github.com/rbgirshick/py-faster-rcnn/issues/433</a></p>
<hr>
<p>Hi, I had the same problem and those are my conclusion at this point :</p>
<p>To me, the best answer was to cut the images in smaller patches, at least for the training phase. According to hardware requirement, you need :</p>
<p>3GB GPU memory for ZF net<br>8GB GPU memory for VGG-16 net<br>That’s taking into account the 600x1000 original scaling, so to make it simple you need 8GB for 600 000 pixels assuming that you use VGG.<br>I have 12GB on my GPU so if this is linear, i can go up to (600 000x12)/8 = 900 000 pixels maximum.<br>I couldn’t resize my images because my objects are small and I couldn’t afford losing resolution.<br>I chose to cut my 3000x4000 images in 750x1000 patches, which is the simplest division to go under 900 000 pixels.</p>
<pre><code><span class="attribute">SCALES</span>: <span class="string">[750]</span>
<span class="attribute">MAX_SIZE</span>: <span class="string">1000</span>
</code></pre><p>However, the good thing is that you only need to cut the images for the training phase. Then you can apply the trained network on full images thanks the the separate test parameters :</p>
<pre><code><span class="label">TEST:</span>
<span class="label">SCALES:</span> [<span class="number">3000</span>]
<span class="label">MAX_SIZE:</span> <span class="number">4000</span>
</code></pre><p>At least that’s what I did and now I have a network working on 3000x4000 images to detect 100x100 objects, in full c++ thanks to the c++ version.</p>
<hr>
<p>Hi guys,<br>I already changed the code in lib/rpn/generate_anchors.py and nub_output like this:<br>ratios and num_output like this<br><img src="https://cloud.githubusercontent.com/assets/13639445/14880213/323ebd54-0d60-11e6-93c7-39c8812ce487.png" alt=""><br><img src="https://cloud.githubusercontent.com/assets/13639445/14880235/4f81b65a-0d60-11e6-95f2-fb58a5b8425c.png" alt=""></p>
<p>However, I got the following error.<br><img src="https://cloud.githubusercontent.com/assets/13639445/14880520/c9cf8a26-0d61-11e6-88d7-71421805514f.png" alt=""></p>
<p>==============</p>
<pre><code>layer {
<span class="string">name:</span> <span class="string">'rpn_cls_prob_reshape'</span>
<span class="string">type:</span> <span class="string">'Reshape'</span>
<span class="string">bottom:</span> <span class="string">'rpn_cls_prob'</span>
<span class="string">top:</span> <span class="string">'rpn_cls_prob_reshape'</span>
reshape_param { shape { <span class="string">dim:</span> <span class="number">0</span> <span class="string">dim:</span> <span class="number">18</span> <span class="string">dim:</span> -<span class="number">1</span> <span class="string">dim:</span> <span class="number">0</span> } }
}
</code></pre><p>You should change this 18 to 24</p>
<hr>
<p>JayMarx </p>
<p>Hello! Do you solve the problem? I changed aspect ratios and followed catsdogone’s method, it’s works, but when I changed scales just like you, it didn’t work.Do you have any idea how to fix it?<br>These are my changes:<br><img src="https://cloud.githubusercontent.com/assets/22469594/20100179/4b2c0864-a5f7-11e6-960c-ed3e178a3ade.png" alt=""><br><img src="https://cloud.githubusercontent.com/assets/22469594/20100187/5728788c-a5f7-11e6-9f9d-33791afcff72.png" alt=""><br><img src="https://cloud.githubusercontent.com/assets/22469594/20100189/5a2352e6-a5f7-11e6-96c2-61b18130f561.png" alt=""><br>As you see, I just changed “dim: 18” to “dim: 140” and I don’t know whether it’s right or not!<br>The error goes like this:<br><img src="https://cloud.githubusercontent.com/assets/22469594/20100325/f7ccde54-a5f7-11e6-8672-7d86dcbbf5aa.png" alt=""></p>
<p>-&gt;&gt;&gt;<br>liuhyCV</p>
<p>@JayMarx I have meet the same error with you. I have found the solutions as follows:<br>at function “ def generate_anchors(base_size=16, ratios=[0.3, 0.5, 1, 1.5, 2], scales=2**np.arange(1, 6)): “,<br>but at anchor_target_layer.py:</p>
<pre><code>def <span class="function"><span class="title">setup</span><span class="params">(self,bottom,top)</span></span>
layer_params = yaml.<span class="function"><span class="title">load</span><span class="params">(self.param_str_)</span></span>
anchor_scales =layer_params.<span class="function"><span class="title">get</span><span class="params">(<span class="string">'scales'</span>, (<span class="number">8</span>, <span class="number">16</span>, <span class="number">32</span>)</span></span>)
self._anchors = <span class="function"><span class="title">generate_anchors</span><span class="params">(scales=np.array(anchor_scales)</span></span>)
</code></pre><p>we should change this code by:</p>
<pre><code>layer_params = yaml.<span class="function"><span class="title">load</span><span class="params">(self.param_str_)</span></span>
anchor_scales =layer_params.<span class="function"><span class="title">get</span><span class="params">(<span class="string">'scales'</span>, (<span class="number">8</span>, <span class="number">16</span>, <span class="number">32</span>)</span></span>)
self._anchors = <span class="function"><span class="title">generate_anchors</span><span class="params">()</span></span>
</code></pre><p>at last the generate_anchors() can use the scales that we defintion</p>
<hr>
<p>@harjatinsingh So far I havent being able to successfully make it work for smaller images as I wanted. However, it seems changing the values of the ratios in generate_anchors.py does make the algorithm to recognize smaller objects, but the bounding box looses precision. For instance, what I have done is changing the code below from this:</p>
<pre><code><span class="function"><span class="keyword">def</span> <span class="title">generate_anchors</span><span class="params">(base_size=<span class="number">16</span>, ratios=[<span class="number">0.5</span>, <span class="number">1</span>, <span class="number">2</span>], scales=<span class="number">2</span>**np.arange<span class="params">(<span class="number">3</span>, <span class="number">6</span>)</span>)</span>:</span>
</code></pre><p>to this:</p>
<pre><code><span class="function"><span class="keyword">def</span> <span class="title">generate_anchors</span><span class="params">(base_size=<span class="number">16</span>, ratios=[<span class="number">0.3</span>, <span class="number">0.75</span>, <span class="number">1</span>], scales=<span class="number">2</span>**np.arange<span class="params">(<span class="number">3</span>, <span class="number">6</span>)</span>)</span>:</span>
</code></pre><p>Also, it seems that changing the values of anchors does work as noted in #<a href="https://github.com/rbgirshick/py-faster-rcnn/issues/161" target="_blank" rel="external">161</a> but I couldnt make it work for me. So my question (in both issues) is still pending.</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DeepLearning/">DeepLearning</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/DeepLearning/">DeepLearning</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-MacOSX+XXNet3.7.5+IPV6" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/10/26/MacOSX+XXNet3.7.5+IPV6/" class="article-date">
  	<time datetime="2017-10-26T15:51:01.000Z" itemprop="datePublished">2017-10-26</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/10/26/MacOSX+XXNet3.7.5+IPV6/">MacOSX+XXNet3.7.5+IPV6</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>1.安装XX-Net</strong></p>
<p><a href="https://github.com/XX-net/XX-Net/releases" target="_blank" rel="external">https://github.com/XX-net/XX-Net/releases</a></p>
<p><strong>2.MacOS设置IPV6</strong></p>
<p>安装merido </p>
<p><a href="http://www.deepdarc.com/miredo-osx/" target="_blank" rel="external">http://www.deepdarc.com/miredo-osx/</a></p>
<p>安装TunTap(pkg安装包 不安装的话 Miredo会一直链接不成功,设置界面显示红灯)</p>
<p><a href="https://sourceforge.net/projects/tuntaposx/?source=typ_redirect" target="_blank" rel="external">https://sourceforge.net/projects/tuntaposx/?source=typ_redirect</a></p>
<p>在系统设置界面，打开merido，其中选择client，然后填入teredo.remlab.net，然后apply即可看到上面的黄灯变为绿色，并且在下方出现IPV6地址。</p>
<p><strong>3.XX-Net运行检查所有IP</strong></p>
<p>XX-Net启用IPV6</p>
<p>能得到上千个有效IP数，连接成功！</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Debug/">Debug</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Debug/">Debug</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Windows下安装labelImg" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/21/Windows下安装labelImg/" class="article-date">
  	<time datetime="2017-09-20T17:53:21.000Z" itemprop="datePublished">2017-09-21</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/21/Windows下安装labelImg/">Windows下安装labelImg</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1.安装必备的Visual Studio 2015，以提供nmake工具</p>
<p>2.在开始菜单中找到Visual Studio Tools &gt; VS2015 x64本机工具命令提示符</p>
<p>3.到pyqt4官方下载sip的源文件</p>
<p>4.编译安装sip</p>
<pre><code>cd C:\sip-<span class="number">4.19</span>.<span class="number">3</span> 
python configure<span class="class">.py</span>
nmake
nmake install
</code></pre><p>5.安装pyqt4，在Windows下不要采用编译安装方法，会掉到坑里。我们使用非官方的安装包，下载地址：<a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/" target="_blank" rel="external">http://www.lfd.uci.edu/~gohlke/pythonlibs/</a>，下载对应的PyQt4‑4.11.4‑cp27‑cp27m‑win_amd64.whl【注意python的版本号，此处是基于python2.7（cp27）】</p>
<pre><code><span class="tag">pip</span> <span class="tag">install</span> <span class="tag">PyQt4</span>‑4<span class="class">.11</span><span class="class">.4</span>‑<span class="tag">cp27</span>‑<span class="tag">cp27m</span>‑<span class="tag">win_amd64</span><span class="class">.whl</span>
</code></pre><p>安装完成之后，将C:\Python27\Lib\site-packages\PyQt4添加到系统路径中</p>
<p>6.安装labelImg，这里编译安装</p>
<pre><code>pyrcc4 -o resources<span class="class">.py</span> resources<span class="class">.qrc</span>
python labelImg.py
</code></pre><p>7.lxml的安装方法参考pyqt4，从中<a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/" target="_blank" rel="external">http://www.lfd.uci.edu/~gohlke/pythonlibs/</a>下载对应python版本号的lxml非官方安装包，然后安装即可</p>
<pre><code><span class="tag">pip</span> <span class="tag">install</span> <span class="tag">lxml-3</span><span class="class">.8</span><span class="class">.0-cp27-cp27m-win_amd64</span><span class="class">.whl</span>
</code></pre><p>完成！！</p>
<p><a href="https://github.com/tzutalin/labelImg" target="_blank" rel="external">https://github.com/tzutalin/labelImg</a></p>
<p><a href="http://www.cnblogs.com/qinjiting/p/5822572.html" target="_blank" rel="external">http://www.cnblogs.com/qinjiting/p/5822572.html</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Debug/">Debug</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Research/">Research</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Caffe训练出错" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/14/Caffe训练出错/" class="article-date">
  	<time datetime="2017-09-14T13:42:31.000Z" itemprop="datePublished">2017-09-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/14/Caffe训练出错/">Caffe训练出错</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Caffe训练出错</p>
<pre><code><span class="tag">F0204</span> 17<span class="pseudo">:40</span><span class="pseudo">:38</span><span class="class">.201807</span> 10866 <span class="rule"><span class="attribute">db_lmdb.hpp</span>:<span class="value"><span class="number">15</span>] Check failed: mdb_status == <span class="number">0</span> (<span class="number">2</span> vs. <span class="number">0</span>) No such file or directory</span></span>
</code></pre><p>You have not set your paths to the LMDB directories correctly.<br>LMDB目录错误,修改prototxt文件的LMDB文件路径</p>
<p>写相对路径不行，写成绝对路径就通过了。。。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Debug/">Debug</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Research/">Research</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-为终端设置Shadowsocks代理" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/12/为终端设置Shadowsocks代理/" class="article-date">
  	<time datetime="2017-09-12T09:55:10.000Z" itemprop="datePublished">2017-09-12</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/12/为终端设置Shadowsocks代理/">为终端设置Shadowsocks代理</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>PS：为解决python tweepy连接twitter api超时的问题。</p>
<pre><code>tweepy.<span class="function"><span class="title">api</span><span class="params">(auth,proxy=<span class="string">"localhost:1080"</span>)</span></span>
</code></pre><p>做开发都会经常接触终端，有些时候我们在终端会做一些网络操作，比如下载gradle包等，由于一些你懂我也懂的原因，某些网络操作不是那么理想，这时候我们就需要设置代理来自由地访问网络。<br>Shadowsocks是我们常用的代理工具，它使用socks5协议，而终端很多工具目前只支持http和https等协议，对socks5协议支持不够好，所以我们为终端设置shadowsocks的思路就是将socks协议转换成http协议，然后为终端设置即可。仔细想想也算是适配器模式的一种现实应用吧。<br>想要进行转换，需要借助工具，这里我们采用比较知名的polipo来实现。polipo是一个轻量级的缓存web代理程序。</p>
<p><strong>准备工作</strong></p>
<p>首先需要配置好一个可用的shadowsocks，客户端下载地址：<a href="https://github.com/shadowsocks/shadowsocks/releases" target="_blank" rel="external">https://github.com/shadowsocks/shadowsocks/releases</a></p>
<p>安装和配置ss，请自行搜索解决。</p>
<p>安装<br>Fedora安装</p>
<pre><code>sudo yum <span class="keyword">install</span> polipo
</code></pre><p>Mac下使用Homebrew安装</p>
<pre><code><span class="keyword">brew </span>install polipo
</code></pre><p>Ubuntu安装</p>
<pre><code>sudo apt-<span class="keyword">get</span> install polipo
</code></pre><p><strong>修改配置(Linux)</strong></p>
<p>如下打开配置文件</p>
<pre><code>sudo vim <span class="regexp">/etc/</span>polipo<span class="regexp">/config</span>
</code></pre><p>设置ParentProxy为Shadowsocks，通常情况下本机shadowsocks的地址如下</p>
<pre><code><span class="comment"># Uncomment this if you want to use a parent SOCKS proxy:</span>

<span class="variable">socksParentProxy =</span> <span class="string">"localhost:1080"</span>
<span class="variable">socksProxyType =</span> socks5
</code></pre><p>设置日志输出文件</p>
<pre><code><span class="built_in">log</span>File=/var/<span class="built_in">log</span>/polipo
<span class="built_in">log</span>Level=<span class="number">4</span>
</code></pre><p><strong>修改配置(Mac)</strong></p>
<p>设置每次登陆启动polipo</p>
<pre><code>ln -sfv <span class="regexp">/usr/</span>local<span class="regexp">/opt/</span>polipo<span class="comment">/*.plist ~/Library/LaunchAgents</span>
</code></pre><p>修改文件<code>/usr/local/opt/polipo/homebrew.mxcl.polipo.plist</code>设置parentProxy</p>
<pre><code><span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="doctype">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span>
<span class="tag">&lt;<span class="title">plist</span> <span class="attribute">version</span>=<span class="value">"1.0"</span>&gt;</span>
  <span class="tag">&lt;<span class="title">dict</span>&gt;</span>
    <span class="tag">&lt;<span class="title">key</span>&gt;</span>Label<span class="tag">&lt;/<span class="title">key</span>&gt;</span>
    <span class="tag">&lt;<span class="title">string</span>&gt;</span>homebrew.mxcl.polipo<span class="tag">&lt;/<span class="title">string</span>&gt;</span>
    <span class="tag">&lt;<span class="title">key</span>&gt;</span>RunAtLoad<span class="tag">&lt;/<span class="title">key</span>&gt;</span>
    <span class="tag">&lt;<span class="title">true</span>/&gt;</span>
    <span class="tag">&lt;<span class="title">key</span>&gt;</span>KeepAlive<span class="tag">&lt;/<span class="title">key</span>&gt;</span>
    <span class="tag">&lt;<span class="title">true</span>/&gt;</span>
    <span class="tag">&lt;<span class="title">key</span>&gt;</span>ProgramArguments<span class="tag">&lt;/<span class="title">key</span>&gt;</span>
    <span class="tag">&lt;<span class="title">array</span>&gt;</span>
        <span class="tag">&lt;<span class="title">string</span>&gt;</span>/usr/local/opt/polipo/bin/polipo<span class="tag">&lt;/<span class="title">string</span>&gt;</span>
        <span class="tag">&lt;<span class="title">string</span>&gt;</span>socksParentProxy=localhost:1080<span class="tag">&lt;/<span class="title">string</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">array</span>&gt;</span>
    <span class="comment">&lt;!-- Set `ulimit -n 20480`. The default OS X limit is 256, that's
         not enough for Polipo (displays 'too many files open' errors).
         It seems like you have no reason to lower this limit
         (and unlikely will want to raise it). --&gt;</span>
    <span class="tag">&lt;<span class="title">key</span>&gt;</span>SoftResourceLimits<span class="tag">&lt;/<span class="title">key</span>&gt;</span>
    <span class="tag">&lt;<span class="title">dict</span>&gt;</span>
      <span class="tag">&lt;<span class="title">key</span>&gt;</span>NumberOfFiles<span class="tag">&lt;/<span class="title">key</span>&gt;</span>
      <span class="tag">&lt;<span class="title">integer</span>&gt;</span>20480<span class="tag">&lt;/<span class="title">integer</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">dict</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">dict</span>&gt;</span>
<span class="tag">&lt;/<span class="title">plist</span>&gt;</span>
</code></pre><p>修改的地方是增加了<code>&lt;string&gt;socksParentProxy=localhost:1080&lt;/string&gt;</code></p>
<p><strong>启动（Linux）</strong></p>
<p>先关闭正在运行的polipo，然后再次启动</p>
<pre><code>sudo <span class="keyword">service</span> polipo <span class="literal">stop</span>
sudo <span class="keyword">service</span> polipo <span class="literal">start</span>
</code></pre><p><strong>启动(Mac)</strong></p>
<pre><code>launchctl unload ~/Library/LaunchAgents/homebrew<span class="class">.mxcl</span><span class="class">.polipo</span><span class="class">.plist</span>
launchctl load ~/Library/LaunchAgents/homebrew<span class="class">.mxcl</span><span class="class">.polipo</span><span class="class">.plis</span>
</code></pre><p>注意：请确保Shadowsocks正常工作。</p>
<p><strong>验证及使用</strong></p>
<p>安装完成就需要进行验证是否work。这里展示一个最简单的验证方法，打开终端，如下执行</p>
<pre><code><span class="number">07</span>:<span class="number">56</span>:<span class="number">24</span>-<span class="keyword">androidyue/var/log$ </span>curl <span class="literal">ip</span>.gs
当前 <span class="literal">IP</span>：<span class="number">125</span>.<span class="number">39</span>.<span class="number">112</span>.<span class="number">15</span> 来自：中国天津天津 联通
<span class="number">08</span>:<span class="number">09</span>:<span class="number">23</span>-<span class="keyword">androidyue/var/log$ </span>http_proxy<span class="label">=http</span>://localhost:<span class="number">8123</span> curl <span class="literal">ip</span>.gs
当前 <span class="literal">IP</span>：<span class="number">210</span>.<span class="number">140</span>.<span class="number">193</span>.<span class="number">128</span> 来自：日本日本
</code></pre><p>如上所示，为某个命令设置代理，前面加上http_proxy=<a href="http://localhost:8123" target="_blank" rel="external">http://localhost:8123</a> 后接命令即可。<br>注：8123是polipo的默认端口，如有需要，可以修改成其他有效端口。</p>
<p><strong>设置别名</strong></p>
<p>bash中有一个很好的东西，就是别名alias. Linux用户修改~/.bashrc，Mac用户修改~/.bash_profile文件，增加如下设置</p>
<pre><code><span class="keyword">alias</span> <span class="title">hp</span>=<span class="string">"http_proxy=http://localhost:8123"</span>
</code></pre><p>然后Linux用户执行source ~/.bashrc，Mac用户执行source ~/.bash_profile</p>
<p><strong>测试使用</strong></p>
<pre><code><span class="number">20</span>:<span class="number">39</span>:<span class="number">39</span>-<span class="keyword">androidyue~$ </span>curl <span class="literal">ip</span>.gs
当前 <span class="literal">IP</span>：<span class="number">125</span>.<span class="number">39</span>.<span class="number">112</span>.<span class="number">14</span> 来自：中国天津天津 联通
<span class="number">20</span>:<span class="number">39</span>:<span class="number">44</span>-<span class="keyword">androidyue~$ </span>hp curl <span class="literal">ip</span>.gs
当前 <span class="literal">IP</span>：<span class="number">210</span>.<span class="number">140</span>.<span class="number">193</span>.<span class="number">128</span> 来自：日本日本 
<span class="number">20</span>:<span class="number">39</span>:<span class="number">48</span>-<span class="keyword">androidyue~$ </span>
</code></pre><p><strong>当前会话全局设置</strong></p>
<p>如果嫌每次为每一个命令设置代理比较麻烦，可以为当前会话设置全局的代理。即使用export http_proxy=<a href="http://localhost:8123即可。" target="_blank" rel="external">http://localhost:8123即可。</a> 如果想撤销当前会话的http_proxy代理，使用 unset http_proxy 即可。 示例效果如下</p>
<pre><code><span class="number">21</span>:<span class="number">29</span>:<span class="number">49</span>-<span class="keyword">androidyue~$ </span>curl <span class="literal">ip</span>.gs
当前 <span class="literal">IP</span>：<span class="number">125</span>.<span class="number">39</span>.<span class="number">112</span>.<span class="number">14</span> 来自：中国天津天津 联通
<span class="number">21</span>:<span class="number">29</span>:<span class="number">52</span>-<span class="keyword">androidyue~$ </span><span class="preprocessor">export</span> http_proxy<span class="label">=http</span>://localhost:<span class="number">8123</span>
<span class="number">21</span>:<span class="number">30</span>:<span class="number">07</span>-<span class="keyword">androidyue~$ </span>curl <span class="literal">ip</span>.gs
当前 <span class="literal">IP</span>：<span class="number">210</span>.<span class="number">140</span>.<span class="number">193</span>.<span class="number">128</span> 来自：日本日本 
<span class="number">21</span>:<span class="number">30</span>:<span class="number">12</span>-<span class="keyword">androidyue~$ </span>unset http_proxy
<span class="number">21</span>:<span class="number">30</span>:<span class="number">37</span>-<span class="keyword">androidyue~$ </span>curl <span class="literal">ip</span>.gs
当前 <span class="literal">IP</span>：<span class="number">125</span>.<span class="number">39</span>.<span class="number">112</span>.<span class="number">14</span> 来自：中国天津天津 联通
</code></pre><p>如果想要更长久的设置代理，可以将export http_proxy=<a href="http://localhost:8123加入.bashrc或者.bash_profile文件" target="_blank" rel="external">http://localhost:8123加入.bashrc或者.bash_profile文件</a></p>
<p><strong>设置Git代理</strong><br>复杂一些的设置Git代理</p>
<pre><code>git clone <span class="string">https:</span><span class="comment">//android.googlesource.com/tools/repo --config http.proxy=localhost:8123</span>

Cloning into <span class="string">'repo'</span>...
<span class="string">remote:</span> Counting <span class="string">objects:</span> <span class="number">135</span>, done
<span class="string">remote:</span> Finding <span class="string">sources:</span> <span class="number">100</span>% (<span class="number">135</span>/<span class="number">135</span>)
<span class="string">remote:</span> Total <span class="number">3483</span> (delta <span class="number">1956</span>), reused <span class="number">3483</span> (delta <span class="number">1956</span>)
Receiving <span class="string">objects:</span> <span class="number">100</span>% (<span class="number">3483</span><span class="regexp">/3483), 2.63 MiB | 492 KiB/</span>s, done.
Resolving <span class="string">deltas:</span> <span class="number">100</span>% (<span class="number">1956</span>/<span class="number">1956</span>), done.
</code></pre><p>其实这样还是比较复杂，因为需要记忆的东西比较多，下面是一个更简单的实现<br>首先，在.bashrc或者.bash_profile文件加入这一句。</p>
<pre><code><span class="setting">gp=<span class="value"><span class="string">" --config http.proxy=localhost:8123"</span></span></span>
</code></pre><p>然后执行source操作，更新当前bash配置。</p>
<p>更简单的使用git的方法</p>
<pre><code>git clone  <span class="string">https:</span><span class="comment">//android.googlesource.com/tools/repo $gp</span>

Cloning into <span class="string">'repo'</span>...
<span class="string">remote:</span> Counting <span class="string">objects:</span> <span class="number">135</span>, done
<span class="string">remote:</span> Finding <span class="string">sources:</span> <span class="number">100</span>% (<span class="number">135</span>/<span class="number">135</span>)
<span class="string">remote:</span> Total <span class="number">3483</span> (delta <span class="number">1956</span>), reused <span class="number">3483</span> (delta <span class="number">1956</span>)
Receiving <span class="string">objects:</span> <span class="number">100</span>% (<span class="number">3483</span><span class="regexp">/3483), 2.63 MiB | 483 KiB/</span>s, done.
Resolving <span class="string">deltas:</span> <span class="number">100</span>% (<span class="number">1956</span>/<span class="number">1956</span>), done.
</code></pre><p>End</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Debug/">Debug</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Research/">Research</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2018 Gang Wang
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>